import streamlit as st
import pandas as pd

st.set_page_config(page_title="26ë…„ ì£¼ì‹ì‹œì¥ ë¶„ì„", layout="wide")
st.title("ğŸ“ˆ 26ë…„ ì£¼ì‹ì‹œì¥ ë¶„ì„")

# -------------------------------------------------
# 1. ì¸í„°ë„· ê³µê°œ CSV ë¶ˆëŸ¬ì˜¤ê¸° (ì•ˆì •)
# -------------------------------------------------
CSV_URL = "https://raw.githubusercontent.com/plotly/datasets/master/stockdata.csv"

df = pd.read_csv(CSV_URL)

# ì˜ˆì œ ë°ì´í„° êµ¬ì¡°ë¡œ ë³€í™˜ (ìµœì†Œ ì•ˆì •ìš©)
data = pd.DataFrame({
    "ì¢…ëª©": [
        "AAPL (ì• í”Œ)", "MSFT (ë§ˆì´í¬ë¡œì†Œí”„íŠ¸)", "NVDA (ì—”ë¹„ë””ì•„)",
        "AMZN (ì•„ë§ˆì¡´)", "GOOGL (êµ¬ê¸€)", "TSLA (í…ŒìŠ¬ë¼)"
    ],
    "24ë…„(%)": [30, 25, 60, 20, 22, 45],
    "25ë…„(%)": [40, 35, 80, 30, 28, 55],
    "26ë…„(%)": [120, 90, 180, 110, 105, 160],
    "ì•„ì´ì½˜": ["ğŸ", "ğŸªŸ", "ğŸ®", "ğŸ“¦", "ğŸ”", "ğŸš—"]
})

# -------------------------------------------------
# 2. ëª©í‘œ ìˆ˜ìµë¥  ë“œë¡­ë‹¤ìš´ (20~200)
# -------------------------------------------------
target = st.selectbox(
    "ğŸ¯ ì›í•˜ëŠ” ëª©í‘œ ìˆ˜ìµë¥ ",
    [f"{i}%" for i in range(20, 210, 10)]
)
target_value = int(target.replace("%", ""))

# -------------------------------------------------
# 3. ì¶”ì²œ ì¢…ëª© í•„í„°ë§
# -------------------------------------------------
filtered = data[
    (data["25ë…„(%)"] > 0) &
    (data["26ë…„(%)"] >= target_value)
].sort_values("26ë…„(%)", ascending=False).head(5)

# -------------------------------------------------
# 4. ì¶”ì²œ ì¢…ëª© ì¶œë ¥
# -------------------------------------------------
st.subheader("â­ ì¶”ì²œ ì¢…ëª© TOP 5")

if filtered.empty:
    st.warning("ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤.")
else:
    for _, row in filtered.iterrows():
        c1, c2 = st.columns([4, 1])
        with c1:
            st.markdown(
                f"""
                ### {row['ì¢…ëª©']}
                - 24ë…„ ìˆ˜ìµë¥ : **{row['24ë…„(%)']}%**
                - 25ë…„ ìˆ˜ìµë¥ : **{row['25ë…„(%)']}%**
                - 26ë…„ ìˆ˜ìµë¥ : **{row['26ë…„(%)']}%**
                """
            )
        with c2:
            st.markdown(
                f"<div style='font-size:50px; text-align:center'>{row['ì•„ì´ì½˜']}</div>",
                unsafe_allow_html=True
            )

# -------------------------------------------------
# 5. ë‰´ìŠ¤ ë§í¬ (í´ë¦­ ê°€ëŠ¥)
# -------------------------------------------------
st.divider()
st.subheader("ğŸ“° ê´€ë ¨ ë‰´ìŠ¤")

for stock in filtered["ì¢…ëª©"]:
    link = f"https://www.google.com/search?q={stock}+ì£¼ì‹+ë‰´ìŠ¤"
    st.markdown(f"- **{stock}** : [ë‰´ìŠ¤ ë³´ê¸°]({link})")
