import streamlit as st
import pandas as pd

st.set_page_config(page_title="26ë…„ ì£¼ì‹ì‹œì¥ ë¶„ì„", layout="wide")
st.title("ğŸ“ˆ 26ë…„ ì£¼ì‹ì‹œì¥ ë¶„ì„")

# -------------------------------------------------
# 1. ì‹œì¥ ì„ íƒ (í•œêµ­ / ë¯¸êµ­)
# -------------------------------------------------
market = st.radio(
    "ğŸ“Œ ì‹œì¥ ì„ íƒ",
    ["ë¯¸êµ­ ì£¼ì‹", "í•œêµ­ ì£¼ì‹"],
    horizontal=True
)

# -------------------------------------------------
# 2. ë°ì´í„° (ì•ˆì •ìš© ì˜ˆì œ)
# -------------------------------------------------
us_data = pd.DataFrame({
    "ì¢…ëª©": ["AAPL (ì• í”Œ)", "MSFT (ë§ˆì´í¬ë¡œì†Œí”„íŠ¸)", "NVDA (ì—”ë¹„ë””ì•„)", "AMZN (ì•„ë§ˆì¡´)", "TSLA (í…ŒìŠ¬ë¼)"],
    "ì•„ì´ì½˜": ["ğŸ", "ğŸªŸ", "ğŸ®", "ğŸ“¦", "ğŸš—"],
    "24ë…„": [30, 25, 60, 20, 45],
    "25ë…„": [40, 35, 80, 30, 55],
    "26ë…„": [120, 90, 180, 110, 160]
})

kr_data = pd.DataFrame({
    "ì¢…ëª©": ["005930 (ì‚¼ì„±ì „ì)", "000660 (SKí•˜ì´ë‹‰ìŠ¤)", "035420 (ë„¤ì´ë²„)", "051910 (LGí™”í•™)", "005380 (í˜„ëŒ€ì°¨)"],
    "ì•„ì´ì½˜": ["ğŸ“±", "ğŸ’¾", "ğŸŒ", "ğŸ§ª", "ğŸš—"],
    "24ë…„": [20, 35, 15, 10, 25],
    "25ë…„": [45, 60, 30, 25, 40],
    "26ë…„": [120, 180, 110, 95, 140]
})

df = us_data if market == "ë¯¸êµ­ ì£¼ì‹" else kr_data

# -------------------------------------------------
# 3. ëª©í‘œ ìˆ˜ìµë¥  ë“œë¡­ë‹¤ìš´
# -------------------------------------------------
target = st.selectbox(
    "ğŸ¯ ëª©í‘œ ìˆ˜ìµë¥  (%)",
    list(range(20, 210, 10))
)

# -------------------------------------------------
# 4. ì¶”ì²œ ì¢…ëª© í•„í„°ë§
# -------------------------------------------------
filtered = df[
    (df["25ë…„"] > 0) &
    (df["26ë…„"] >= target)
].sort_values("26ë…„", ascending=False).head(5)

# -------------------------------------------------
# 5. í•œ í™”ë©´ ì¶œë ¥ (ì¢ì€ ë ˆì´ì•„ì›ƒ)
# -------------------------------------------------
st.subheader("â­ ì¶”ì²œ ì¢…ëª© TOP 5")

if filtered.empty:
    st.warning("ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤.")
else:
    for _, row in filtered.iterrows():
        c1, c2, c3, c4, c5 = st.columns([1, 3, 1, 1, 1])

        c1.markdown(f"<div style='font-size:28px'>{row['ì•„ì´ì½˜']}</div>", unsafe_allow_html=True)
        c2.markdown(f"**{row['ì¢…ëª©']}**")
        c3.markdown(f"24ë…„<br>**{row['24ë…„']}%**", unsafe_allow_html=True)
        c4.markdown(f"25ë…„<br>**{row['25ë…„']}%**", unsafe_allow_html=True)
        c5.markdown(f"26ë…„<br>**{row['26ë…„']}%**", unsafe_allow_html=True)

# -------------------------------------------------
# 6. ë‰´ìŠ¤ ë§í¬ (í•œ í™”ë©´ ìœ ì§€)
# -------------------------------------------------
st.divider()
st.subheader("ğŸ“° ê´€ë ¨ ë‰´ìŠ¤")

for stock in filtered["ì¢…ëª©"]:
    link = f"https://www.google.com/search?q={stock}+ì£¼ì‹+ë‰´ìŠ¤"
    st.markdown(f"- [{stock} ê´€ë ¨ ë‰´ìŠ¤ ë³´ê¸°]({link})")
